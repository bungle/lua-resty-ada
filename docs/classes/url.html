<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LuaJIT FFI bindings to Ada â€” WHATWG-compliant and fast URL parser</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>resty.ada</h1>

<img src="../data/icon.png" />

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Validate_Methods">Validate Methods </a></li>
<li><a href="#Has_Methods">Has Methods </a></li>
<li><a href="#Get_Methods">Get Methods </a></li>
<li><a href="#Set_Methods">Set Methods </a></li>
<li><a href="#Clear_Methods">Clear Methods </a></li>
<li><a href="#Search_Methods">Search Methods </a></li>
<li><a href="#Other_Methods">Other Methods </a></li>
<li><a href="#Meta_Methods">Meta Methods </a></li>
<li><a href="#Properties">Properties </a></li>
</ul>


<h2>Classes</h2>
<ul class="nowrap">
  <li><strong>url</strong></li>
  <li><a href="../classes/search.html">search</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/resty.ada.html">resty.ada</a></li>
  <li><a href="../modules/resty.ada.search.html">resty.ada.search</a></li>
</ul>

</div>

<div id="content">

<h1>Class <code>url</code></h1>
<p>Ada URL</p>
<p> See: <a href="https://url.spec.whatwg.org/#url-representation">https://url.spec.whatwg.org/#url-representation</a></p>


<h2><a href="#Validate_Methods">Validate Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:is_valid">url:is_valid ()</a></td>
	<td class="summary">Checks whether the URL is valid.</td>
	</tr>
</table>
<h2><a href="#Has_Methods">Has Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:has_credentials">url:has_credentials ()</a></td>
	<td class="summary">Checks whether the URL has credentials.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_non_empty_username">url:has_non_empty_username ()</a></td>
	<td class="summary">Checks whether the URL has a non-empty username.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_password">url:has_password ()</a></td>
	<td class="summary">Checks whether the URL has a password.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_non_empty_password">url:has_non_empty_password ()</a></td>
	<td class="summary">Checks whether the URL has a non-empty password.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_hostname">url:has_hostname ()</a></td>
	<td class="summary">Checks whether the URL has a hostname (included an empty host).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_empty_hostname">url:has_empty_hostname ()</a></td>
	<td class="summary">Checks whether the URL has an host but it is the empty string.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_port">url:has_port ()</a></td>
	<td class="summary">Checks whether the URL has a (non default) port.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_search">url:has_search ()</a></td>
	<td class="summary">Checks whether the URL has a search component.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:has_hash">url:has_hash ()</a></td>
	<td class="summary">Checks whether the URL has a hash component.</td>
	</tr>
</table>
<h2><a href="#Get_Methods">Get Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:get_components">url:get_components ()</a></td>
	<td class="summary">Get URL component positions in a string (Lua 1-based indexing).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_href">url:get_href ()</a></td>
	<td class="summary">Get URL in a normalized form.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_protocol">url:get_protocol ()</a></td>
	<td class="summary">Get protocol from the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_scheme_type">url:get_scheme_type ()</a></td>
	<td class="summary">Get scheme type from the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_origin">url:get_origin ()</a></td>
	<td class="summary">Get origin of the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_username">url:get_username ()</a></td>
	<td class="summary">Get URL's username.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_password">url:get_password ()</a></td>
	<td class="summary">Get URL's password.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_host">url:get_host ()</a></td>
	<td class="summary">Get URL's host, serialized, followed by U+003A (:) and url's port,
 serialized.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_hostname">url:get_hostname ()</a></td>
	<td class="summary">Get  URL's host (name only), serialized.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_host_type">url:get_host_type ()</a></td>
	<td class="summary">Get host type from the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_port">url:get_port ()</a></td>
	<td class="summary">Get URL's port.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_pathname">url:get_pathname ()</a></td>
	<td class="summary">Get URL's path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_search">url:get_search ()</a></td>
	<td class="summary">Get URL's search (query).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:get_hash">url:get_hash ()</a></td>
	<td class="summary">Get URL's hash (fragment).</td>
	</tr>
</table>
<h2><a href="#Set_Methods">Set Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:set_href">url:set_href (href)</a></td>
	<td class="summary">Sets HREF (aka url) to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_protocol">url:set_protocol (protocol)</a></td>
	<td class="summary">Sets protocol to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_username">url:set_username (username)</a></td>
	<td class="summary">Sets username to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_password">url:set_password (password)</a></td>
	<td class="summary">Sets password to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_host">url:set_host (host)</a></td>
	<td class="summary">Sets host to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_hostname">url:set_hostname (hostname)</a></td>
	<td class="summary">Sets host (name only) to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_port">url:set_port (port)</a></td>
	<td class="summary">Sets port to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_pathname">url:set_pathname (path)</a></td>
	<td class="summary">Sets path to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_search">url:set_search (query)</a></td>
	<td class="summary">Sets search (query) to the URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:set_hash">url:set_hash (hash)</a></td>
	<td class="summary">Sets hash (fragment) to the URL.</td>
	</tr>
</table>
<h2><a href="#Clear_Methods">Clear Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:clear_port">url:clear_port ()</a></td>
	<td class="summary">Clear URL's port.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:clear_search">url:clear_search ()</a></td>
	<td class="summary">Clear URL's search (query string).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:clear_hash">url:clear_hash ()</a></td>
	<td class="summary">Clear URL's hash (fragment).</td>
	</tr>
</table>
<h2><a href="#Search_Methods">Search Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:search_parse">url:search_parse ()</a></td>
	<td class="summary">Parses search from URL and returns an instance of Ada URL Search.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_has">url:search_has (key)</a></td>
	<td class="summary">Checks whether the url has a search with a key.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_has_value">url:search_has_value (key, value)</a></td>
	<td class="summary">Checks whether the url has a search with a key with a specific value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_get">url:search_get (key)</a></td>
	<td class="summary">Get URL's search parameter's value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_get_all">url:search_get_all (key)</a></td>
	<td class="summary">Get all the URL's search parameter's values.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_set">url:search_set (key, value)</a></td>
	<td class="summary">Set the URL's search parameter's value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_append">url:search_append (key, value)</a></td>
	<td class="summary">Append value to the the URL's search parameter.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_remove">url:search_remove (key)</a></td>
	<td class="summary">Remove search parameter from URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_remove_value">url:search_remove_value (key, value)</a></td>
	<td class="summary">Remove search parameter's value from URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_sort">url:search_sort ()</a></td>
	<td class="summary">Sort the URL's search parameters.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_size">url:search_size ()</a></td>
	<td class="summary">Count search parameters in URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_each">url:search_each ()</a></td>
	<td class="summary">Iterate over search parameters in URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_each_key">url:search_each_key ()</a></td>
	<td class="summary">Iterate over each key in parameters in URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_each_value">url:search_each_value ()</a></td>
	<td class="summary">Iterate over each value in search parameters in URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_pairs">url:search_pairs ()</a></td>
	<td class="summary">Iterate over each key and value in search parameters in URL.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:search_pairs">url:search_pairs ()</a></td>
	<td class="summary">Iterate over each parameter in search parameters in URL.</td>
	</tr>
</table>
<h2><a href="#Other_Methods">Other Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:tostring">url:tostring ()</a></td>
	<td class="summary">Get URL in a normalized form.</td>
	</tr>
</table>
<h2><a href="#Meta_Methods">Meta Methods </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url:__tostring">url:__tostring ()</a></td>
	<td class="summary">Return search parameters as a string.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#url:__len">url:__len ()</a></td>
	<td class="summary">Get length of the URL.</td>
	</tr>
</table>
<h2><a href="#Properties">Properties </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#url._VERSION">url._VERSION</a></td>
	<td class="summary">

</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Validate_Methods"></a>Validate Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:is_valid"></a>
    <strong>url:is_valid ()</strong>
    </dt>
    <dd>
    Checks whether the URL is valid.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL is valid, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">is_valid</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Has_Methods"></a>Has Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:has_credentials"></a>
    <strong>url:has_credentials ()</strong>
    </dt>
    <dd>
    Checks whether the URL has credentials. </p>

<p> A URL includes credentials if its username or password is not the empty string.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has credentials, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_credentials</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_non_empty_username"></a>
    <strong>url:has_non_empty_username ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a non-empty username.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a non-empty username, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_non_empty_username</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_password"></a>
    <strong>url:has_password ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a password.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a password, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_password</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_non_empty_password"></a>
    <strong>url:has_non_empty_password ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a non-empty password.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a non-empty password, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_non_empty_password</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_hostname"></a>
    <strong>url:has_hostname ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a hostname (included an empty host).



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a hostname (included an empty host), otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_hostname</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_empty_hostname"></a>
    <strong>url:has_empty_hostname ()</strong>
    </dt>
    <dd>
    Checks whether the URL has an host but it is the empty string.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has an empty hostname, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_empty_hostname</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_port"></a>
    <strong>url:has_port ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a (non default) port.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a (non default) port, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_port</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_search"></a>
    <strong>url:has_search ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a search component.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a search, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_search</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:has_hash"></a>
    <strong>url:has_hash ()</strong>
    </dt>
    <dd>
    Checks whether the URL has a hash component.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if URL has a hash, otherwise <code>false</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">has_hash</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Get_Methods"></a>Get Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:get_components"></a>
    <strong>url:get_components ()</strong>
    </dt>
    <dd>

<p>Get URL component positions in a string (Lua 1-based indexing). </p>

<pre><code>https://user:pass@example.com:1234/foo/bar?baz#quux
      |     |    |          | ^^^^|       |   |
      |     |    |          | |   |       |   ------ hash_start
      |     |    |          | |   |       ---------- search_start
      |     |    |          | |   ------------------ pathname_start
      |     |    |          | ---------------------- port
      |     |    |          ------------------------ host_end
      |     |    ----------------------------------- host_start
      |     ---------------------------------------- username_end
      ---------------------------------------------- protocol_end
</code></pre>

<p> Given a following URL:</p>
<pre><code>https://user:pass@example.com:1234/foo/bar?baz#quux
</code></pre>

<p> This function will return following table:</p>

<pre><code>{
  protocol_end = 7,
  username_end = 13,
  host_start = 18,
  host_end = 29,
  port = 1234,
  pathname_start = 35,
  search_start = 43,
  hash_start = 47,
}
</code></pre>





    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        table of URL components (or their positions)
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_components</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_href"></a>
    <strong>url:get_href ()</strong>
    </dt>
    <dd>
    Get URL in a normalized form. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-href">https://url.spec.whatwg.org/#dom-url-href</a>
 See: <a href="https://url.spec.whatwg.org/#concept-url-serializer">https://url.spec.whatwg.org/#concept-url-serializer</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL in a normalized form
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_protocol"></a>
    <strong>url:get_protocol ()</strong>
    </dt>
    <dd>
    Get protocol from the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-protocol">https://url.spec.whatwg.org/#dom-url-protocol</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        protocol part of the URL
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_protocol</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_scheme_type"></a>
    <strong>url:get_scheme_type ()</strong>
    </dt>
    <dd>

<p>Get scheme type from the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#url-miscellaneous">https://url.spec.whatwg.org/#url-miscellaneous</a></p>

<p> Scheme type definitions:</p>

<pre><code>0 = HTTP
1 = NOT_SPECIAL
2 = HTTPS
3 = WS
4 = FTP
5 = WSS
6 = FILE
</code></pre>





    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        scheme type of the URL
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_scheme_type</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_origin"></a>
    <strong>url:get_origin ()</strong>
    </dt>
    <dd>
    Get origin of the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        origin of the URL
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_origin</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_username"></a>
    <strong>url:get_username ()</strong>
    </dt>
    <dd>
    Get URL's username. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-username">https://url.spec.whatwg.org/#dom-url-username</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's username
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_username</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_password"></a>
    <strong>url:get_password ()</strong>
    </dt>
    <dd>
    Get URL's password. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-password">https://url.spec.whatwg.org/#dom-url-password</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's password
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_password</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_host"></a>
    <strong>url:get_host ()</strong>
    </dt>
    <dd>
    Get URL's host, serialized, followed by U+003A (:) and url's port,
 serialized. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-host">https://url.spec.whatwg.org/#dom-url-host</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's host
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_host</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_hostname"></a>
    <strong>url:get_hostname ()</strong>
    </dt>
    <dd>
    Get  URL's host (name only), serialized. </p>

<p> When there is no host, this function returns the empty string.</p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-hostname">https://url.spec.whatwg.org/#dom-url-hostname</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's host (name only)
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_hostname</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_host_type"></a>
    <strong>url:get_host_type ()</strong>
    </dt>
    <dd>

<p>Get host type from the URL. </p>

<p> Host type definitions:</p>

<pre><code>0 = DEFAULT: e.g. "https://www.google.com"
1 = IPV4:    e.g. "http://127.0.0.1"
2 = IPV6:    e.g. "http://[2001:db8:3333:4444:5555:6666:7777:8888]"
</code></pre>





    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        scheme type of the URL
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_host_type</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_port"></a>
    <strong>url:get_port ()</strong>
    </dt>
    <dd>
    Get URL's port. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-port">https://url.spec.whatwg.org/#dom-url-port</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's port
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_port</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_pathname"></a>
    <strong>url:get_pathname ()</strong>
    </dt>
    <dd>
    Get URL's path. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-pathname">https://url.spec.whatwg.org/#dom-url-pathname</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's path
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_pathname</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_search"></a>
    <strong>url:get_search ()</strong>
    </dt>
    <dd>
    Get URL's search (query). </p>

<p> Return U+003F (?), followed by URL's query.</p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-search">https://url.spec.whatwg.org/#dom-url-search</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's query
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_search</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:get_hash"></a>
    <strong>url:get_hash ()</strong>
    </dt>
    <dd>
    Get URL's hash (fragment). </p>

<p> Return U+0023 (#), followed by URL's fragment.</p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-hash">https://url.spec.whatwg.org/#dom-url-hash</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL's fragment (except on errors <code>nil</code>)
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">get_hash</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Set_Methods"></a>Set Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:set_href"></a>
    <strong>url:set_href (href)</strong>
    </dt>
    <dd>
    Sets HREF (aka url) to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-href">https://url.spec.whatwg.org/#dom-url-href</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">href</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the HREF to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when href is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_protocol</span>(<span class="string">"wss"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_protocol"></a>
    <strong>url:set_protocol (protocol)</strong>
    </dt>
    <dd>
    Sets protocol to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-protocol">https://url.spec.whatwg.org/#dom-url-protocol</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">protocol</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the protocol to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when protocol is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_protocol</span>(<span class="string">"wss"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_username"></a>
    <strong>url:set_username (username)</strong>
    </dt>
    <dd>
    Sets username to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-username">https://url.spec.whatwg.org/#dom-url-username</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">username</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the username to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when username is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_username</span>(<span class="string">"guest"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_password"></a>
    <strong>url:set_password (password)</strong>
    </dt>
    <dd>
    Sets password to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-password">https://url.spec.whatwg.org/#dom-url-password</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">password</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the password to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when password is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">ada_set_password</span>(<span class="string">"secret"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_host"></a>
    <strong>url:set_host (host)</strong>
    </dt>
    <dd>
    Sets host to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-host">https://url.spec.whatwg.org/#dom-url-host</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">host</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the host to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when host is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_host</span>(<span class="string">"test:4321"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_hostname"></a>
    <strong>url:set_hostname (hostname)</strong>
    </dt>
    <dd>
    Sets host (name only) to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-hostname">https://url.spec.whatwg.org/#dom-url-hostname</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">hostname</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the host (name only) to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when hostname is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_hostname</span>(<span class="string">"test"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_port"></a>
    <strong>url:set_port (port)</strong>
    </dt>
    <dd>
    Sets port to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-port">https://url.spec.whatwg.org/#dom-url-port</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">port</span>
            <span class="types"><span class="type">number</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the port to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when port is not a number or a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_port</span>(<span class="number">4321</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_pathname"></a>
    <strong>url:set_pathname (path)</strong>
    </dt>
    <dd>
    Sets path to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-pathname">https://url.spec.whatwg.org/#dom-url-pathname</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the path to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../classes/url.html#">url</a> or <span class="type">nil</span></span>
        self (except on errors <code>nil</code>)</li>
        <li>
           <span class="types"><span class="type">nil</span> or <a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        error message</li>
    </ol>

    <h3>Raises:</h3>
    error when pathname is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_pathname</span>(<span class="string">"foo"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_search"></a>
    <strong>url:set_search (query)</strong>
    </dt>
    <dd>
    Sets search (query) to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-search">https://url.spec.whatwg.org/#dom-url-search</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">query</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the query string to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when query is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_search</span>(<span class="string">"q=1&amp;done"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:set_hash"></a>
    <strong>url:set_hash (hash)</strong>
    </dt>
    <dd>
    Sets hash (fragment) to the URL. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-hash">https://url.spec.whatwg.org/#dom-url-hash</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">hash</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the fragment to set to the URL
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when hash is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">set_hash</span>(<span class="string">"home"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Clear_Methods"></a>Clear Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:clear_port"></a>
    <strong>url:clear_port ()</strong>
    </dt>
    <dd>
    Clear URL's port. </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-port">https://url.spec.whatwg.org/#dom-url-port</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">clear_port</span>():<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:clear_search"></a>
    <strong>url:clear_search ()</strong>
    </dt>
    <dd>
    Clear URL's search (query string). </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-search">https://url.spec.whatwg.org/#dom-url-search</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">clear_search</span>():<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:clear_hash"></a>
    <strong>url:clear_hash ()</strong>
    </dt>
    <dd>
    Clear URL's hash (fragment). </p>

<p> See: <a href="https://url.spec.whatwg.org/#dom-url-hash">https://url.spec.whatwg.org/#dom-url-hash</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">clear_hash</span>():<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Search_Methods"></a>Search Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:search_parse"></a>
    <strong>url:search_parse ()</strong>
    </dt>
    <dd>
    Parses search from URL and returns an instance of Ada URL Search.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/search.html#">search</a></span>
        Ada URL Search instance
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> search = url:<span class="function-name">search_parse</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_has"></a>
    <strong>url:search_has (key)</strong>
    </dt>
    <dd>
    Checks whether the url has a search with a key.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if search has the key, otherwise <code>false</code>
    </ol>

    <h3>Raises:</h3>
    error when key is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_has</span>(<span class="string">"a"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_has_value"></a>
    <strong>url:search_has_value (key, value)</strong>
    </dt>
    <dd>
    Checks whether the url has a search with a key with a specific value.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name to check
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter value to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        <code>true</code> if search has the key with the value, otherwise <code>false</code>
    </ol>

    <h3>Raises:</h3>
    error when key or value is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_has_value</span>(<span class="string">"a"</span>, <span class="string">"b"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_get"></a>
    <strong>url:search_get (key)</strong>
    </dt>
    <dd>
    Get URL's search parameter's value.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a> or <span class="type">nil</span></span>
        parameter value or <code>nil</code>
    </ol>

    <h3>Raises:</h3>
    error when key is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_get</span>(<span class="string">"a"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_get_all"></a>
    <strong>url:search_get_all (key)</strong>
    </dt>
    <dd>
    Get all the URL's search parameter's values.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        array of all the values (or an empty array)
    </ol>

    <h3>Raises:</h3>
    error when key is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_get_all</span>(<span class="string">"a"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_set"></a>
    <strong>url:search_set (key, value)</strong>
    </dt>
    <dd>
    Set the URL's search parameter's value.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter value
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when key or value is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_set</span>(<span class="string">"a"</span>, <span class="string">"g"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_append"></a>
    <strong>url:search_append (key, value)</strong>
    </dt>
    <dd>
    Append value to the the URL's search parameter.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter value
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when key or value is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_append</span>(<span class="string">"a"</span>, <span class="string">"g"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_remove"></a>
    <strong>url:search_remove (key)</strong>
    </dt>
    <dd>
    Remove search parameter from URL.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when key is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_remove</span>(<span class="string">"a"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_remove_value"></a>
    <strong>url:search_remove_value (key, value)</strong>
    </dt>
    <dd>
    Remove search parameter's value from URL.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter name
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         search parameter's value
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>

    <h3>Raises:</h3>
    error when key or value is not a string


    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_remove_value</span>(<span class="string">"a"</span>, <span class="string">"b"</span>):<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_sort"></a>
    <strong>url:search_sort ()</strong>
    </dt>
    <dd>
    Sort the URL's search parameters.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../classes/url.html#">url</a></span>
        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?e=f&amp;c=d&amp;a=b"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_sort</span>():<span class="function-name">get_href</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_size"></a>
    <strong>url:search_size ()</strong>
    </dt>
    <dd>
    Count search parameters in URL.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        search parameters count
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> res = url:<span class="function-name">search_size</span>()</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_each"></a>
    <strong>url:search_each ()</strong>
    </dt>
    <dd>
    Iterate over search parameters in URL.



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">function</span></span>
        iterator function</li>
        <li>
           <span class="types"><span class="type">cdata</span></span>
        state</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">for</span> param <span class="keyword">in</span> url:<span class="function-name">search_each</span>() <span class="keyword">do</span>
  <span class="global">print</span>(param.key, <span class="string">" = "</span>, param.value)
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_each_key"></a>
    <strong>url:search_each_key ()</strong>
    </dt>
    <dd>
    Iterate over each key in parameters in URL.



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">function</span></span>
        iterator function</li>
        <li>
           <span class="types"><span class="type">cdata</span></span>
        state</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">for</span> key <span class="keyword">in</span> url:<span class="function-name">search_each_key</span>() <span class="keyword">do</span>
  <span class="global">print</span>(<span class="string">"key: "</span>, key)
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_each_value"></a>
    <strong>url:search_each_value ()</strong>
    </dt>
    <dd>
    Iterate over each value in search parameters in URL.



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">function</span></span>
        iterator function</li>
        <li>
           <span class="types"><span class="type">cdata</span></span>
        state</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">for</span> value <span class="keyword">in</span> url:<span class="function-name">search_each_value</span>() <span class="keyword">do</span>
  <span class="global">print</span>(<span class="string">"value: "</span>, value)
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_pairs"></a>
    <strong>url:search_pairs ()</strong>
    </dt>
    <dd>
    Iterate over each key and value in search parameters in URL.



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">function</span></span>
        iterator function</li>
        <li>
           <span class="types"><span class="type">cdata</span></span>
        state</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">for</span> key, value  <span class="keyword">in</span> url:<span class="function-name">search_pairs</span>() <span class="keyword">do</span>
  <span class="global">print</span>(key, <span class="string">" = "</span>, value)
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "url:search_pairs"></a>
    <strong>url:search_pairs ()</strong>
    </dt>
    <dd>
    Iterate over each parameter in search parameters in URL.



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">function</span></span>
        iterator function</li>
        <li>
           <span class="types"><span class="type">cdata</span></span>
        state</li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/?a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">for</span> i, param <span class="keyword">in</span> url:<span class="function-name">search_ipairs</span>() <span class="keyword">do</span>
  <span class="global">print</span>(i, <span class="string">". "</span>, param.key, <span class="string">" = "</span>, param.value)
<span class="keyword">end</span></pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Other_Methods"></a>Other Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:tostring"></a>
    <strong>url:tostring ()</strong>
    </dt>
    <dd>
    Get URL in a normalized form.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        URL in a normalized form
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> url = <span class="global">require</span>(<span class="string">"resty.ada"</span>).<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> res = url:<span class="global">tostring</span>()</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Meta_Methods"></a>Meta Methods </h2>

    <dl class="function">
    <dt>
    <a name = "url:__tostring"></a>
    <strong>url:__tostring ()</strong>
    </dt>
    <dd>
    Return search parameters as a string. </p>

<p> See: <a href="https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior">https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior</a>



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        string presentation of the search parameters
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> search = <span class="global">require</span>(<span class="string">"resty.ada.search"</span>).<span class="function-name">parse</span>(<span class="string">"a=b&amp;c=d&amp;e=f"</span>)
<span class="keyword">local</span> result = <span class="global">tostring</span>(search)</pre>
    </ul>

</dd>
    <dt>
    <a name = "url:__len"></a>
    <strong>url:__len ()</strong>
    </dt>
    <dd>
    Get length of the URL.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        length of the URL
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> ada = <span class="global">require</span>(<span class="string">"resty.ada"</span>)
<span class="keyword">local</span> url = ada.<span class="function-name">parse</span>(<span class="string">"https://user:pass@host:1234/path?search#hash"</span>)
<span class="keyword">local</span> len = #url</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="Properties"></a>Properties </h2>

    <dl class="function">
    <dt>
    <a name = "url._VERSION"></a>
    <strong>url._VERSION</strong>
    </dt>
    <dd>





    <ul>
        <li><span class="parameter">_VERSION</span>
         resty.ada version
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2024-08-06 23:06:33 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
